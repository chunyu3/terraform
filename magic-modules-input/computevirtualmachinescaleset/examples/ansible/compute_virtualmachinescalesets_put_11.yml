--- !ruby/object:Provider::Ansible::Example
task: !ruby/object:Provider::Ansible::Task
  name: azure_rm_computevirtualmachinescaleset
  description: Create a scale set with virtual machines in different zones.
  code:
    resource_group: myResourceGroup
    vm_scale_set_name: myVirtualMachineScaleSet
    location: centralus
    sku:
      name: Standard_A1_v2
      tier: Standard
      capacity: '2'
    upgrade_policy:
      mode: Automatic
    virtual_machine_profile:
      os_profile:
        computer_name_prefix: '{vmss-name}'
        admin_username: '{your-username}'
        admin_password: '{your-password}'
      storage_profile:
        image_reference:
          publisher: MicrosoftWindowsServer
          offer: WindowsServer
          sku: 2016-Datacenter
          version: latest
        os_disk:
          caching: ReadWrite
          create_option: FromImage
          disk_size_gb: '512'
          managed_disk:
            storageAccountType: Standard_LRS
        data_disks:
          - lun: '0'
            create_option: Empty
            disk_size_gb: '1023'
          - lun: '1'
            create_option: Empty
            disk_size_gb: '1023'
      network_profile:
        network_interface_configurations:
          - name: '{vmss-name}'
    overprovision: true
    zones:
      - '1'
      - '3'
  