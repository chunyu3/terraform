--- !ruby/object:Api::Product
name: Azure Cluster Management
versions:
  - !ruby/object:Api::Product::Version
    name: ga
    base_url: NotUsedInAzure
scopes:
  - NotUsedInAzure
objects:
  - !ruby/object:Api::Resource
    name: Cluster
    api_name: BatchAI
    base_url: NotUsedInAzure

    azure_sdk_definition: !ruby/object:Api::Azure::SDKDefinition
      provider_name: Microsoft.BatchAI
      go_client_namespace: batchaisdk
      go_client: clustersClient
      python_client_namespace: azure.mgmt.batchaisdk
      python_client: BatchAIClient.clusters
      create: !ruby/object:Api::Azure::SDKOperationDefinition
        async: true
        go_func_name: Create
        python_func_name: create
        request:
          'resourceGroupName': !ruby/object:Api::Azure::SDKTypeDefinition::StringObject
            id_portion: resourceGroups
            go_variable_name: resourceGroup
            python_parameter_name: resource_group_name
            python_variable_name: resource_group
          'workspaceName': !ruby/object:Api::Azure::SDKTypeDefinition::StringObject
            id_portion: workspaces
            go_variable_name: workspaceName
            python_parameter_name: workspace_name
            python_variable_name: workspace_name
          'clusterName': !ruby/object:Api::Azure::SDKTypeDefinition::StringObject
            id_portion: clusters
            go_variable_name: name
            python_parameter_name: cluster_name
            python_variable_name: name
          '/': !ruby/object:Api::Azure::SDKTypeDefinition::ComplexObject
            go_variable_name: parameters
            go_type_name: ClusterUpdateParameters
            python_parameter_name: parameters
            python_variable_name: parameters
          '/properties': !ruby/object:Api::Azure::SDKTypeDefinition::ComplexObject
            applicable_to: [go]
            go_field_name: ClusterUpdateProperties
            go_type_name: ClusterUpdateProperties
          '/scaleSettings': !ruby/object:Api::Azure::SDKTypeDefinition::ComplexObject
            applicable_to: [python]
            python_field_name: scale_settings
          '/scaleSettings/manual': !ruby/object:Api::Azure::SDKTypeDefinition::ComplexObject
            applicable_to: [python]
            python_field_name: manual
          '/scaleSettings/manual/targetNodeCount': !ruby/object:Api::Azure::SDKTypeDefinition::Integer32Object
            applicable_to: [python]
            python_field_name: target_node_count
          '/scaleSettings/manual/nodeDeallocationOption': !ruby/object:Api::Azure::SDKTypeDefinition::EnumObject
            applicable_to: [python]
            python_field_name: node_deallocation_option
          '/scaleSettings/autoScale': !ruby/object:Api::Azure::SDKTypeDefinition::ComplexObject
            applicable_to: [python]
            python_field_name: auto_scale
          '/scaleSettings/autoScale/minimumNodeCount': !ruby/object:Api::Azure::SDKTypeDefinition::Integer32Object
            applicable_to: [python]
            python_field_name: minimum_node_count
          '/scaleSettings/autoScale/maximumNodeCount': !ruby/object:Api::Azure::SDKTypeDefinition::Integer32Object
            applicable_to: [python]
            python_field_name: maximum_node_count
          '/scaleSettings/autoScale/initialNodeCount': !ruby/object:Api::Azure::SDKTypeDefinition::Integer32Object
            applicable_to: [python]
            python_field_name: initial_node_count
          '/properties/scaleSettings': !ruby/object:Api::Azure::SDKTypeDefinition::ComplexObject
            applicable_to: [go]
            go_field_name: ScaleSettings
            go_type_name: ScaleSettings
          '/properties/scaleSettings/manual': !ruby/object:Api::Azure::SDKTypeDefinition::ComplexObject
            applicable_to: [go]
            go_field_name: Manual
            go_type_name: ManualScaleSettings
          '/properties/scaleSettings/manual/targetNodeCount': !ruby/object:Api::Azure::SDKTypeDefinition::Integer32Object
            applicable_to: [go]
            go_field_name: TargetNodeCount
          '/properties/scaleSettings/manual/nodeDeallocationOption': !ruby/object:Api::Azure::SDKTypeDefinition::EnumObject
            applicable_to: [go]
            go_field_name: NodeDeallocationOption
            go_enum_type_name: DeallocationOption
          '/properties/scaleSettings/autoScale': !ruby/object:Api::Azure::SDKTypeDefinition::ComplexObject
            applicable_to: [go]
            go_field_name: AutoScale
            go_type_name: AutoScaleSettings
          '/properties/scaleSettings/autoScale/minimumNodeCount': !ruby/object:Api::Azure::SDKTypeDefinition::Integer32Object
            applicable_to: [go]
            go_field_name: MinimumNodeCount
          '/properties/scaleSettings/autoScale/maximumNodeCount': !ruby/object:Api::Azure::SDKTypeDefinition::Integer32Object
            applicable_to: [go]
            go_field_name: MaximumNodeCount
          '/properties/scaleSettings/autoScale/initialNodeCount': !ruby/object:Api::Azure::SDKTypeDefinition::Integer32Object
            applicable_to: [go]
            go_field_name: InitialNodeCount
      update: !ruby/object:Api::Azure::SDKOperationDefinition
        go_func_name: Update
        python_func_name: update
        request:
          'resourceGroupName': !ruby/object:Api::Azure::SDKTypeDefinition::StringObject
            id_portion: resourceGroups
            go_variable_name: resourceGroup
            python_parameter_name: resource_group_name
            python_variable_name: resource_group
          'workspaceName': !ruby/object:Api::Azure::SDKTypeDefinition::StringObject
            id_portion: workspaces
            go_variable_name: workspaceName
            python_parameter_name: workspace_name
            python_variable_name: workspace_name
          'clusterName': !ruby/object:Api::Azure::SDKTypeDefinition::StringObject
            id_portion: clusters
            go_variable_name: name
            python_parameter_name: cluster_name
            python_variable_name: name
          '/': !ruby/object:Api::Azure::SDKTypeDefinition::ComplexObject
            go_variable_name: parameters
            go_type_name: ClusterUpdateParameters
            python_parameter_name: parameters
            python_variable_name: parameters
          '/properties': !ruby/object:Api::Azure::SDKTypeDefinition::ComplexObject
            applicable_to: [go]
            go_field_name: ClusterUpdateProperties
            go_type_name: ClusterUpdateProperties
          '/scaleSettings': !ruby/object:Api::Azure::SDKTypeDefinition::ComplexObject
            applicable_to: [python]
            python_field_name: scale_settings
          '/scaleSettings/manual': !ruby/object:Api::Azure::SDKTypeDefinition::ComplexObject
            applicable_to: [python]
            python_field_name: manual
          '/scaleSettings/manual/targetNodeCount': !ruby/object:Api::Azure::SDKTypeDefinition::Integer32Object
            applicable_to: [python]
            python_field_name: target_node_count
          '/scaleSettings/manual/nodeDeallocationOption': !ruby/object:Api::Azure::SDKTypeDefinition::EnumObject
            applicable_to: [python]
            python_field_name: node_deallocation_option
          '/scaleSettings/autoScale': !ruby/object:Api::Azure::SDKTypeDefinition::ComplexObject
            applicable_to: [python]
            python_field_name: auto_scale
          '/scaleSettings/autoScale/minimumNodeCount': !ruby/object:Api::Azure::SDKTypeDefinition::Integer32Object
            applicable_to: [python]
            python_field_name: minimum_node_count
          '/scaleSettings/autoScale/maximumNodeCount': !ruby/object:Api::Azure::SDKTypeDefinition::Integer32Object
            applicable_to: [python]
            python_field_name: maximum_node_count
          '/scaleSettings/autoScale/initialNodeCount': !ruby/object:Api::Azure::SDKTypeDefinition::Integer32Object
            applicable_to: [python]
            python_field_name: initial_node_count
          '/properties/scaleSettings': !ruby/object:Api::Azure::SDKTypeDefinition::ComplexObject
            applicable_to: [go]
            go_field_name: ScaleSettings
            go_type_name: ScaleSettings
          '/properties/scaleSettings/manual': !ruby/object:Api::Azure::SDKTypeDefinition::ComplexObject
            applicable_to: [go]
            go_field_name: Manual
            go_type_name: ManualScaleSettings
          '/properties/scaleSettings/manual/targetNodeCount': !ruby/object:Api::Azure::SDKTypeDefinition::Integer32Object
            applicable_to: [go]
            go_field_name: TargetNodeCount
          '/properties/scaleSettings/manual/nodeDeallocationOption': !ruby/object:Api::Azure::SDKTypeDefinition::EnumObject
            applicable_to: [go]
            go_field_name: NodeDeallocationOption
            go_enum_type_name: DeallocationOption
          '/properties/scaleSettings/autoScale': !ruby/object:Api::Azure::SDKTypeDefinition::ComplexObject
            applicable_to: [go]
            go_field_name: AutoScale
            go_type_name: AutoScaleSettings
          '/properties/scaleSettings/autoScale/minimumNodeCount': !ruby/object:Api::Azure::SDKTypeDefinition::Integer32Object
            applicable_to: [go]
            go_field_name: MinimumNodeCount
          '/properties/scaleSettings/autoScale/maximumNodeCount': !ruby/object:Api::Azure::SDKTypeDefinition::Integer32Object
            applicable_to: [go]
            go_field_name: MaximumNodeCount
          '/properties/scaleSettings/autoScale/initialNodeCount': !ruby/object:Api::Azure::SDKTypeDefinition::Integer32Object
            applicable_to: [go]
            go_field_name: InitialNodeCount
      delete: !ruby/object:Api::Azure::SDKOperationDefinition
        async: true
        go_func_name: Delete
        python_func_name: delete
        request:
          'resourceGroupName': !ruby/object:Api::Azure::SDKTypeDefinition::StringObject
            id_portion: resourceGroups
            go_variable_name: resourceGroup
            python_parameter_name: resource_group_name
            python_variable_name: resource_group
          'workspaceName': !ruby/object:Api::Azure::SDKTypeDefinition::StringObject
            id_portion: workspaces
            go_variable_name: workspaceName
            python_parameter_name: workspace_name
            python_variable_name: workspace_name
          'clusterName': !ruby/object:Api::Azure::SDKTypeDefinition::StringObject
            id_portion: clusters
            go_variable_name: name
            python_parameter_name: cluster_name
            python_variable_name: name
      read: !ruby/object:Api::Azure::SDKOperationDefinition
        go_func_name: Get
        python_func_name: get
        request:
          'resourceGroupName': !ruby/object:Api::Azure::SDKTypeDefinition::StringObject
            id_portion: resourceGroups
            go_variable_name: resourceGroup
            python_parameter_name: resource_group_name
            python_variable_name: resource_group
          'workspaceName': !ruby/object:Api::Azure::SDKTypeDefinition::StringObject
            id_portion: workspaces
            go_variable_name: workspaceName
            python_parameter_name: workspace_name
            python_variable_name: workspace_name
          'clusterName': !ruby/object:Api::Azure::SDKTypeDefinition::StringObject
            id_portion: clusters
            go_variable_name: name
            python_parameter_name: cluster_name
            python_variable_name: name
        response:
          '/id': !ruby/object:Api::Azure::SDKTypeDefinition::StringObject
            go_field_name: ID
            python_field_name: id
          '/name': !ruby/object:Api::Azure::SDKTypeDefinition::StringObject
            go_field_name: Name
            python_field_name: name
          '/type': !ruby/object:Api::Azure::SDKTypeDefinition::StringObject
            go_field_name: Type
            python_field_name: type
      list_by_parent: !ruby/object:Api::Azure::SDKOperationDefinition
        go_func_name: ListByWorkspace
        python_func_name: list_by_workspace
        request:
          'resourceGroupName': !ruby/object:Api::Azure::SDKTypeDefinition::StringObject
            id_portion: resourceGroups
            go_variable_name: resourceGroup
            python_parameter_name: resource_group_name
            python_variable_name: resource_group
          'workspaceName': !ruby/object:Api::Azure::SDKTypeDefinition::StringObject
            id_portion: workspaces
            go_variable_name: workspaceName
            python_parameter_name: workspace_name
            python_variable_name: workspace_name
          'maxresults': !ruby/object:Api::Azure::SDKTypeDefinition::Integer32Object
            id_portion: null
            go_variable_name: maxresults
            python_parameter_name: maxresults
            python_variable_name: maxresults
      list_by_parent: !ruby/object:Api::Azure::SDKOperationDefinition
        go_func_name: ListRemoteLoginInformation
        python_func_name: list_remote_login_information
        request:
          'resourceGroupName': !ruby/object:Api::Azure::SDKTypeDefinition::StringObject
            id_portion: resourceGroups
            go_variable_name: resourceGroup
            python_parameter_name: resource_group_name
            python_variable_name: resource_group
          'workspaceName': !ruby/object:Api::Azure::SDKTypeDefinition::StringObject
            id_portion: workspaces
            go_variable_name: workspaceName
            python_parameter_name: workspace_name
            python_variable_name: workspace_name
          'clusterName': !ruby/object:Api::Azure::SDKTypeDefinition::StringObject
            id_portion: clusters
            go_variable_name: name
            python_parameter_name: cluster_name
            python_variable_name: name

    description: |
      Manage Azure Cluster instance.
    properties:
      - !ruby/object:Api::Azure::Type::ResourceGroupName
        name: 'resourceGroup'
        description: 'Name of the resource group to which the resource belongs.'
        required: true
        input: true
        azure_sdk_references: ['resourceGroupName']
      - !ruby/object:Api::Type::String
        name: 'workspaceName'
        description: 'The name of the workspace. Workspace names can only contain a combination of alphanumeric characters along with dash (-) and underscore (_). The name must be from 1 through 64 characters long.'
        required: true
        input: true
        azure_sdk_references: ['workspaceName']
      - !ruby/object:Api::Type::String
        name: 'name'
        description: 'The name of the cluster within the specified resource group. Cluster names can only contain a combination of alphanumeric characters along with dash (-) and underscore (_). The name must be from 1 through 64 characters long.'
        required: true
        input: true
        azure_sdk_references: ['clusterName']
      - !ruby/object:Api::Type::NestedObject
        name: 'scaleSettings'
        description: 'Desired scale settings for the cluster. Batch AI service supports manual and auto scale clusters.'
        required: false
        azure_sdk_references: ['/scaleSettings', '/properties/scaleSettings']
        properties:
          - !ruby/object:Api::Type::NestedObject
            name: 'manual'
            description: 'Manual scale settings for the cluster.'
            required: false
            azure_sdk_references: ['/scaleSettings/manual', '/properties/scaleSettings/manual']
            properties:
              - !ruby/object:Api::Type::Integer
                name: 'targetNodeCount'
                description: 'The desired number of compute nodes in the Cluster. Default is 0.'
                required: true
                azure_sdk_references: ['/scaleSettings/manual/targetNodeCount', '/properties/scaleSettings/manual/targetNodeCount']
              - !ruby/object:Api::Type::Enum
                name: 'nodeDeallocationOption'
                description: 'An action to be performed when the cluster size is decreasing. The default value is requeue.'
                required: false
                azure_sdk_references: ['/scaleSettings/manual/nodeDeallocationOption', '/properties/scaleSettings/manual/nodeDeallocationOption']
                values:
                  - :requeue
                  - :terminate
                  - :waitforjobcompletion
                default_value: :requeue
          - !ruby/object:Api::Type::NestedObject
            name: 'autoScale'
            description: 'Auto-scale settings for the cluster.'
            required: false
            azure_sdk_references: ['/scaleSettings/autoScale', '/properties/scaleSettings/autoScale']
            properties:
              - !ruby/object:Api::Type::Integer
                name: 'minimumNodeCount'
                description: 'The minimum number of compute nodes the Batch AI service will try to allocate for the cluster. Note, the actual number of nodes can be less than the specified value if the subscription has not enough quota to fulfill the request.'
                required: true
                azure_sdk_references: ['/scaleSettings/autoScale/minimumNodeCount', '/properties/scaleSettings/autoScale/minimumNodeCount']
              - !ruby/object:Api::Type::Integer
                name: 'maximumNodeCount'
                description: 'The maximum number of compute nodes the cluster can have.'
                required: true
                azure_sdk_references: ['/scaleSettings/autoScale/maximumNodeCount', '/properties/scaleSettings/autoScale/maximumNodeCount']
              - !ruby/object:Api::Type::Integer
                name: 'initialNodeCount'
                description: 'The number of compute nodes to allocate on cluster creation. Note that this value is used only during cluster creation. Default: 0.'
                required: false
                azure_sdk_references: ['/scaleSettings/autoScale/initialNodeCount', '/properties/scaleSettings/autoScale/initialNodeCount']
      - !ruby/object:Api::Type::Integer
        name: 'maxresults'
        description: 'The maximum number of items to return in the response. A maximum of 1000 files can be returned.'
        required: false
        input: true
        azure_sdk_references: ['maxresults']
      # read only values included only in response
      - !ruby/object:Api::Type::String
        name: 'id'
        description: 'The ID of the resource.'
        output: true
        azure_sdk_references: ['/id']
      - !ruby/object:Api::Type::String
        name: 'name'
        description: 'The name of the resource.'
        output: true
        azure_sdk_references: ['/name']
      - !ruby/object:Api::Type::String
        name: 'type'
        description: 'The type of the resource.'
        output: true
        azure_sdk_references: ['/type']