---
# ----------------------------------------------------------------------------
#
#     ***     AUTO GENERATED CODE    ***    AUTO GENERATED CODE     ***
#
# ----------------------------------------------------------------------------
#
#     This file is automatically generated by Magic Modules and manual
#     changes will be clobbered when the file is regenerated.
#
#     Please read more about how to change this file at
#     https://github.com/Azure/magic-module-specs
#
# ----------------------------------------------------------------------------
layout: "azurerm"
page_title: "Azure Resource Manager: azurerm_cluster"
sidebar_current: "docs-azurerm-resource-cluster"
description: |-
  Manage Azure Cluster instance.
---

# azurerm_cluster

Manage Azure Cluster instance.


## Argument Reference

The following arguments are supported:

* `resource_group` - (Required) Name of the resource group to which the resource belongs. Changing this forces a new resource to be created.

* `location` - (Required) The region in which to create the cluster. Changing this forces a new resource to be created.

* `cluster_name` - (Required) The name of the cluster within the specified resource group. Cluster names can only contain a combination of alphanumeric characters along with dash (-) and underscore (_). The name must be from 1 through 64 characters long. Changing this forces a new resource to be created.

* `user_account_settings` - (Required) One `user_account_setting` block defined below.

* `vm_size` - (Required) All virtual machines in a cluster are the same size. For information about available VM sizes for clusters using images from the Virtual Machines Marketplace (see Sizes for Virtual Machines (Linux) or Sizes for Virtual Machines (Windows). Batch AI service supports all Azure VM sizes except STANDARD_A0 and those with premium storage (STANDARD_GS, STANDARD_DS, and STANDARD_DSV2 series).

---

The `user_account_setting` block supports the following:

* `admin_user_name` - (Required) 

* `admin_user_ssh_public_key` - (Optional) 

* `admin_user_password` - (Optional) 

* `node_setup` - (Optional) One `node_setup` block defined below.

* `scale_settings` - (Optional) One `scale_setting` block defined below.

* `subnet` - (Optional) One `subnet` block defined below.

* `virtual_machine_configuration` - (Optional) One `virtual_machine_configuration` block defined below.

* `vm_priority` - (Optional) Default is dedicated. Defaults to `dedicated`.

* `tags` - (Optional) The user specified tags associated with the Cluster. Changing this forces a new resource to be created.

---

The `node_setup` block supports the following:

* `setup_task` - (Optional) One `setup_task` block defined below.

* `mount_volumes` - (Optional) One `mount_volume` block defined below.


---

The `setup_task` block supports the following:

* `command_line` - (Required) 

* `environment_variables` - (Optional) One or more `environment_variable` block defined below.

* `run_elevated` - (Optional) 

* `std_out_err_path_prefix` - (Required) The path where the Batch AI service will upload the stdout and stderror of setup task.


---

The `environment_variable` block supports the following:

* `name` - (Required) 

* `value` - (Optional) 

---

The `mount_volume` block supports the following:

* `azure_file_shares` - (Optional) One or more `azure_file_share` block defined below.

* `azure_blob_file_systems` - (Optional) One or more `azure_blob_file_system` block defined below.

* `file_servers` - (Optional) One or more `file_server` block defined below.

* `unmanaged_file_systems` - (Optional) One or more `unmanaged_file_system` block defined below.


---

The `azure_file_share` block supports the following:

* `account_name` - (Required) 

* `azure_file_url` - (Required) 

* `relative_mount_path` - (Required) Note that all file shares will be mounted under $AZ_BATCHAI_MOUNT_ROOT location.

* `file_mode` - (Optional) Default value is 0777. Valid only if OS is linux.

* `directory_mode` - (Optional) Default value is 0777. Valid only if OS is linux.

---

The `azure_blob_file_system` block supports the following:

* `account_name` - (Required) 

* `container_name` - (Required) 

* `relative_mount_path` - (Required) Note that all blob file systems will be mounted under $AZ_BATCHAI_MOUNT_ROOT location.

* `mount_options` - (Optional) 

---

The `file_server` block supports the following:

* `source_directory` - (Optional) If this property is not specified, the entire File Server will be mounted.

* `relative_mount_path` - (Required) Note that all file shares will be mounted under $AZ_BATCHAI_MOUNT_ROOT location.

* `mount_options` - (Optional) 

---

The `unmanaged_file_system` block supports the following:

* `mount_command` - (Required) 

* `relative_mount_path` - (Required) Note that all file shares will be mounted under $AZ_BATCHAI_MOUNT_ROOT location.

---

The `scale_setting` block supports the following:

* `manual` - (Optional) One `manual` block defined below.

* `auto_scale` - (Optional) One `auto_scale` block defined below.


---

The `manual` block supports the following:

* `target_node_count` - (Required) Default is 0. If autoScaleSettings are not specified, then the Cluster starts with this target.

* `node_deallocation_option` - (Optional) The default value is requeue. Defaults to `requeue`.

---

The `auto_scale` block supports the following:

* `minimum_node_count` - (Required) 

* `maximum_node_count` - (Required) 

* `initial_node_count` - (Optional) 

---

The `subnet` block supports the following:

* `id` - (Required) The ID of the resource

---

The `virtual_machine_configuration` block supports the following:

* `image_reference` - (Optional) One `image_reference` block defined below.


---

The `image_reference` block supports the following:

* `publisher` - (Required) 

* `offer` - (Required) 

* `sku` - (Required) 

* `version` - (Optional) 

## Attributes Reference

The following attributes are exported:

* `creation_time` - 

* `provisioning_state` - Possible value are: creating - Specifies that the cluster is being created. succeeded - Specifies that the cluster has been created successfully. failed - Specifies that the cluster creation has failed. deleting - Specifies that the cluster is being deleted.

* `provisioning_state_transition_time` - 

* `allocation_state` - Possible values are: steady and resizing. steady state indicates that the cluster is not resizing. There are no changes to the number of compute nodes in the cluster in progress. A cluster enters this state when it is created and when no operations are being performed on the cluster to change the number of compute nodes. resizing state indicates that the cluster is resizing; that is, compute nodes are being added to or removed from the cluster.

* `allocation_state_transition_time` - 

* `errors` - One or more `error` block defined below.

* `current_node_count` - 

* `node_state_counts` - One `node_state_count` block defined below.

* `id` - The ID of the resource

* `name` - The name of the resource

* `type` - The type of the resource


---

The `error` block contains the following:

* `code` - (Optional) An identifier for the error. Codes are invariant and are intended to be consumed programmatically.

* `message` - (Optional) A message describing the error, intended to be suitable for display in a user interface.

* `details` - (Optional) One or more `detail` block defined below.


---

The `detail` block supports the following:

* `name` - (Optional) 

* `value` - (Optional) 

---

The `node_state_count` block contains the following:

* `idle_node_count` - (Required) 

* `running_node_count` - (Required) 

* `preparing_node_count` - (Required) 

* `unusable_node_count` - (Required) 

* `leaving_node_count` - (Required) 
